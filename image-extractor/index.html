<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Free Online Image Extractor. Extract and download all images, favicons, logos, and photos from any website URL instantly.">
    <meta name="keywords"
        content="image extractor from url, download all images from website, website image grabber, extract photos from website, favicon downloader">
    <meta name="author" content="LinkShare">
    <meta property="og:title" content="Image Extractor from URL - Download All Website Images | LinkShare">
    <meta property="og:description"
        content="Extract every image, logo, and favicon from a website URL. Free tool to grab all media.">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Image Extractor from URL - LinkShare">
    <meta name="twitter:description" content="Download all images from any webpage in seconds.">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />

    <title>Image Extractor from URL - Download All Photos & Logos | LinkShare</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Adsense Script-->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8130991342525434"
        crossorigin="anonymous"></script>

    <!-- navbar -->
    <script src="../js/nav-loader.js"></script>

    <style>
        .tool-container {
            max-width: 1000px;
            margin: 3rem auto;
            padding: 2rem;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .tool-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .url-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #eee;
            border-radius: 50px;
            font-size: 1.1rem;
            min-width: 250px;
            outline: none;
        }

        .url-input:focus {
            border-color: #25D366;
        }

        .extract-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .extract-btn:hover {
            background: #128C7E;
        }

        .extract-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .stats-bar {
            display: none;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            color: #555;
            font-weight: 500;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 2rem;
        }

        .image-card {
            background: #fff;
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .img-wrapper {
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9f9f9;
            /* Checkered pattern would be nice for transparency, simple gray for now */
            background-image: linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee), linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            padding: 10px;
        }

        .img-wrapper img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .card-actions {
            padding: 10px;
            text-align: center;
            border-top: 1px solid #eee;
            background: white;
            margin-top: auto;
        }

        .img-info {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 8px;
            word-break: break-all;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .download-btn {
            background: #3498db;
            color: white;
            text-decoration: none;
            padding: 5px 15px;
            border-radius: 4px;
            font-size: 0.9rem;
            display: inline-block;
        }

        .download-btn:hover {
            background: #2980b9;
        }

        .loading-spinner {
            display: none;
            text-align: center;
            margin: 2rem 0;
            color: #25D366;
            font-size: 2rem;
        }

        .error-msg {
            color: #e74c3c;
            text-align: center;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>

<body>
    <main class="tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-images" style="color: #3498db;"></i> Image Extractor from URL</h1>
            <p>Extract all images, logos, and favicons from any website URL.</p>
        </div>

        <div class="input-group">
            <input type="url" id="targetUrl" class="url-input"
                placeholder="Enter website URL (e.g., https://example.com)" />
            <button class="extract-btn" onclick="extractImages()">
                <i class="fas fa-search"></i> Extract Images
            </button>
        </div>

        <div class="loading-spinner" id="loader">
            <i class="fas fa-spinner fa-spin"></i> Fetching images...
        </div>

        <p class="error-msg" id="errorMsg"></p>

        <div class="stats-bar" id="statsBar">
            Found <span id="imgCount">0</span> images
        </div>

        <div class="image-grid" id="imageGrid">
            <!-- Images will appear here -->
        </div>

        <div style="margin-top: 3rem;">
            <h2>How it works?</h2>
            <p style="color: #666; line-height: 1.6;">
                This tool scans the webpage of the URL you provide and identifies all image sources. It looks for:
            </p>
            <ul style="margin-left: 20px; line-height: 1.6; color: #555;">
                <li>Standard images (<code>&lt;img&gt;</code> tags)</li>
                <li>Website Icons & Favicons (<code>&lt;link rel="icon"&gt;</code>)</li>
                <li>Social Media Thumbnails (<code>og:image</code> property)</li>
                <li>Apple Touch Icons</li>
            </ul>
        </div>
    </main>

    <!-- Footer -->
    <script src="../js/footer-loader.js"></script>

    <script>
        const API_KEY = "7a4878286f0a46d3a12029e952aad89a";

        async function extractImages() {
            const urlInput = document.getElementById('targetUrl');
            const grid = document.getElementById('imageGrid');
            const loader = document.getElementById('loader');
            const errorMsg = document.getElementById('errorMsg');
            const statsBar = document.getElementById('statsBar');
            const imgCount = document.getElementById('imgCount');

            let targetUrl = urlInput.value.trim();

            if (!targetUrl) {
                showError("Please enter a valid URL");
                return;
            }

            // Ensure protocol
            if (!/^https?:\/\//i.test(targetUrl)) {
                targetUrl = 'https://' + targetUrl;
                urlInput.value = targetUrl;
            }

            // Reset UI
            grid.innerHTML = '';
            errorMsg.style.display = 'none';
            statsBar.style.display = 'none';
            loader.style.display = 'block';

            try {
                // Use AbstractAPI Web Scraper
                // Note: AbstractAPI returns the HTML content in the JSON response
                const apiUrl = `https://scrape.abstractapi.com/v1/?api_key=${API_KEY}&url=${encodeURIComponent(targetUrl)}`;

                const response = await fetch(apiUrl);

                if (!response.ok) throw new Error('API request failed');

                // AbstractAPI returns raw HTML content by direct request? 
                // Actually documentation usually says JSON, but sometimes direct. 
                // Let's check headers or assume JSON first.
                // If it fails parsing JSON, treat as text.

                let htmlContent = '';
                const contentType = response.headers.get("content-type");
                if (contentType && contentType.indexOf("application/json") !== -1) {
                    const data = await response.json();
                    // AbstractAPI standard response has 'content' field
                    htmlContent = data.content || '';
                } else {
                    htmlContent = await response.text();
                }

                if (!htmlContent) throw new Error('No content returned from website');

                // Parse HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(htmlContent, 'text/html');

                const images = new Set(); // Use Set to avoid duplicates

                // 1. Get <img> tags (src, data-src, srcset)
                doc.querySelectorAll('img').forEach(img => {
                    // Standard src
                    const src = img.getAttribute('src');
                    if (src) images.add(resolveUrl(src, targetUrl));

                    // Lazy load data attributes
                    const dataSrc = img.getAttribute('data-src') || img.getAttribute('data-original') || img.getAttribute('data-lazy');
                    if (dataSrc) images.add(resolveUrl(dataSrc, targetUrl));

                    // Parse srcset for high-res versions
                    const srcset = img.getAttribute('srcset');
                    if (srcset) {
                        const candidates = srcset.split(',');
                        candidates.forEach(candidate => {
                            const url = candidate.trim().split(' ')[0];
                            if (url) images.add(resolveUrl(url, targetUrl));
                        });
                    }
                });

                // 2. CSS Background Images (inline styles)
                doc.querySelectorAll('*[style]').forEach(el => {
                    const style = el.getAttribute('style');
                    const match = style.match(/background-image:\s*url\(['"]?(.*?)['"]?\)/i);
                    if (match && match[1]) {
                        images.add(resolveUrl(match[1], targetUrl));
                    }
                });

                // 3. Get Favicons & Icons
                doc.querySelectorAll('link[rel*="icon"], link[rel="apple-touch-icon"]').forEach(link => {
                    const href = link.getAttribute('href');
                    if (href) images.add(resolveUrl(href, targetUrl));
                });

                // 4. Get OG Images & Twitter Cards
                doc.querySelectorAll('meta[property="og:image"], meta[name="twitter:image"]').forEach(meta => {
                    const content = meta.getAttribute('content');
                    if (content) images.add(resolveUrl(content, targetUrl));
                });

                displayImages(Array.from(images));

            } catch (err) {
                console.error(err);
                showError("Failed to fetch images. The API quota might be exceeded or the site is blocking access.");
            } finally {
                loader.style.display = 'none';
            }
        }

        function resolveUrl(url, baseUrl) {
            try {
                // Remove whitespace
                url = url.trim();

                // Handle protocol-relative URLs //example.com/img.jpg
                if (url.startsWith('//')) {
                    return 'https:' + url;
                }

                return new URL(url, baseUrl).href;
            } catch (e) {
                return url;
            }
        }

        function displayImages(imgUrls) {
            const grid = document.getElementById('imageGrid');
            const statsBar = document.getElementById('statsBar');
            const imgCount = document.getElementById('imgCount');

            // Filter invalid or tiny URLs
            const validUrls = imgUrls.filter(url =>
                url &&
                url.length > 5 &&
                !url.startsWith('data:image/svg') && // Skip SVG data URIs
                !url.startsWith('data:image/gif')    // Skip 1x1 spacer GIFs often used
            );

            imgCount.textContent = validUrls.length;
            statsBar.style.display = 'block';

            if (validUrls.length === 0) {
                showError("No images found on this page.");
                return;
            }

            validUrls.forEach(url => {
                const card = document.createElement('div');
                card.className = 'image-card';

                // Try to get a clean filename
                let filename = 'image';
                try {
                    const urlObj = new URL(url);
                    const path = urlObj.pathname;
                    const parts = path.split('/');
                    const name = parts[parts.length - 1];
                    if (name && name.length < 30) filename = name;
                } catch (e) { }

                card.innerHTML = `
                    <div class="img-wrapper">
                        <img src="${url}" alt="Extracted Image" onerror="this.parentElement.parentElement.style.display='none'"> 
                    </div>
                    <div class="card-actions">
                        <div class="img-info">${filename}</div>
                        <a href="${url}" class="download-btn" target="_blank">
                            <i class="fas fa-download"></i> Download
                        </a>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function showError(msg) {
            const el = document.getElementById('errorMsg');
            el.innerHTML = msg + '<br><small>Tip: Some websites strictly block automated access.</small>';
            el.style.display = 'block';
        }

        // Enter key support
        document.getElementById('targetUrl').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') extractImages();
        });
    </script>
</body>

</html>