<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Short URL Generator - LinkShare.Online</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background: #f7f7f7;
      color: #333;
    }

    .container {
      max-width: 500px;
      margin: auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    input, button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      font-size: 16px;
    }

    button {
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background: #0056b3;
    }

    .result {
      margin-top: 20px;
      padding: 12px;
      background: #e9f7ef;
      border-left: 4px solid #28a745;
      word-break: break-all;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ðŸ”— Short URL Generator</h2>
    <input type="text" id="longUrl" placeholder="Enter your long URL here" />
    <button onclick="generateShortUrl()">Generate Short URL</button>
    <div id="shortUrlResult" class="result" style="display:none;"></div>
  </div>

  <script>
    // ðŸ”¥ Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyB1Nejcpv0jubaq85ufjZwll-k62aIjFuQ",
      authDomain: "short-url-generator-9ab67.firebaseapp.com",
      databaseURL: "https://short-url-generator-9ab67-default-rtdb.firebaseio.com",
      projectId: "short-url-generator-9ab67",
      storageBucket: "short-url-generator-9ab67.firebasestorage.app",
      messagingSenderId: "375644970022",
      appId: "1:375644970022:web:be24008ed6f3a57a66dae7",
      measurementId: "G-1Q7PCGD8TM"
    };

    // âœ… Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ðŸ”— Generate Random Short ID
    function generateId(length = 6) {
      const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    // ðŸŽ¯ Generate Short URL & Save
    function generateShortUrl() {
      const longUrl = document.getElementById('longUrl').value.trim();
      if (!longUrl) {
        alert("Please enter a valid URL.");
        return;
      }

      const shortId = generateId();
      db.ref('shorturls/' + shortId).set({
        original: longUrl,
        createdAt: new Date().toISOString()
      }, (error) => {
        if (error) {
          alert("Something went wrong!");
        } else {
          const shortUrl = `https://linkshare.online/s/${shortId}`;
          document.getElementById('shortUrlResult').style.display = 'block';
          document.getElementById('shortUrlResult').innerHTML = `Short URL: <a href="${shortUrl}" target="_blank">${shortUrl}</a>`;
        }
      });
    }
  </script>
</body>
</html>
